import{a as m,y as N,c as P,b as a,d as t,w as s,e as o,E as x,u as V,z as U,o as k,g as _,t as c,j as f,l as $,A as j,s as z,m as A,B as F,p as q}from"./index-onYwJO-V.js";import{h as g}from"./http-Cz2McMqW.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-t--hEgTQ.js";const H={class:"dashboard-container"},J={class:"page-header"},K={class:"header-actions"},L={class:"card-header"},Q={class:"card-content"},W={class:"data-value"},X={class:"card-header"},Y={class:"card-content"},Z={class:"data-value"},ee={class:"card-header"},te={class:"card-content"},se={class:"data-value"},ae={class:"card-header"},de={class:"card-content"},oe={class:"data-value"},le={class:"card-header"},re={__name:"Dashboard",setup(ne){const w=V(),h=m(!1),i=m({pendingOrders:0,todayIncome:0,totalProducts:0,totalUsers:0}),b=m([]),D=m({trees:0,recycledMaterials:0,carbonReduction:0}),y=async()=>{h.value=!0;try{const[d,e,l]=await Promise.all([g.get("/api/dashboard/stats"),g.get("/api/dashboard/recent-orders"),g.get("/api/dashboard/eco-stats")]);d.code===200&&(i.value=d.data),e.code===200&&(b.value=e.data),l.code===200&&(D.value=l.data),x.success("数据加载成功")}catch(d){console.error("获取数据失败:",d),x.error("获取数据失败，请稍后重试")}finally{h.value=!1}},M=()=>{y()},O=()=>{w.push("/orders")},C=d=>{w.push(`/orders/${d}`)},B=d=>({pending:"待付款",paid:"已付款",shipped:"已发货",delivered:"已送达",canceled:"已取消"})[d]||d,R=d=>({pending:"warning",paid:"primary",shipped:"success",delivered:"success",canceled:"danger"})[d]||"info";return N(()=>{y()}),(d,e)=>{const l=o("el-button"),p=o("el-icon"),u=o("el-card"),v=o("el-col"),S=o("el-row"),r=o("el-table-column"),T=o("el-tag"),E=o("el-table"),I=U("loading");return k(),P("div",H,[a("div",J,[e[1]||(e[1]=a("h1",{class:"page-title"},"仪表盘",-1)),a("div",K,[t(l,{type:"primary",onClick:M},{default:s(()=>e[0]||(e[0]=[_("刷新数据")])),_:1})])]),t(S,{gutter:20,class:"dashboard-cards"},{default:s(()=>[t(v,{xs:24,sm:12,md:6},{default:s(()=>[t(u,{class:"data-card",shadow:"hover"},{header:s(()=>[a("div",L,[e[2]||(e[2]=a("h3",null,"待处理订单",-1)),t(p,{class:"icon"},{default:s(()=>[t(f($))]),_:1})])]),default:s(()=>[a("div",Q,[a("div",W,c(i.value.pendingOrders),1),e[3]||(e[3]=a("div",{class:"data-desc"},"等待处理的订单",-1))])]),_:1})]),_:1}),t(v,{xs:24,sm:12,md:6},{default:s(()=>[t(u,{class:"data-card",shadow:"hover"},{header:s(()=>[a("div",X,[e[4]||(e[4]=a("h3",null,"今日收入",-1)),t(p,{class:"icon"},{default:s(()=>[t(f(j))]),_:1})])]),default:s(()=>[a("div",Y,[a("div",Z,"¥"+c(i.value.todayIncome),1),e[5]||(e[5]=a("div",{class:"data-desc"},"今日销售总额",-1))])]),_:1})]),_:1}),t(v,{xs:24,sm:12,md:6},{default:s(()=>[t(u,{class:"data-card",shadow:"hover"},{header:s(()=>[a("div",ee,[e[6]||(e[6]=a("h3",null,"商品总数",-1)),t(p,{class:"icon"},{default:s(()=>[t(f(z))]),_:1})])]),default:s(()=>[a("div",te,[a("div",se,c(i.value.totalProducts),1),e[7]||(e[7]=a("div",{class:"data-desc"},"在售蔬菜瓜果数量",-1))])]),_:1})]),_:1}),t(v,{xs:24,sm:12,md:6},{default:s(()=>[t(u,{class:"data-card",shadow:"hover"},{header:s(()=>[a("div",ae,[e[8]||(e[8]=a("h3",null,"注册用户",-1)),t(p,{class:"icon"},{default:s(()=>[t(f(A))]),_:1})])]),default:s(()=>[a("div",de,[a("div",oe,c(i.value.totalUsers),1),e[9]||(e[9]=a("div",{class:"data-desc"},"平台注册用户",-1))])]),_:1})]),_:1})]),_:1}),t(u,{class:"recent-orders",shadow:"never"},{header:s(()=>[a("div",le,[e[11]||(e[11]=a("h3",null,"最近订单",-1)),t(l,{link:"",onClick:O},{default:s(()=>e[10]||(e[10]=[_("查看全部")])),_:1})])]),default:s(()=>[F((k(),q(E,{data:b.value,style:{width:"100%"}},{default:s(()=>[t(r,{prop:"order_number",label:"订单号","min-width":"180"}),t(r,{prop:"user_name",label:"用户","min-width":"120"}),t(r,{prop:"total_amount",label:"金额","min-width":"100"},{default:s(n=>[_(" ¥"+c(n.row.total_amount.toFixed(2)),1)]),_:1}),t(r,{prop:"status",label:"状态","min-width":"100"},{default:s(n=>[t(T,{type:R(n.row.status),class:"status-tag"},{default:s(()=>[_(c(B(n.row.status)),1)]),_:2},1032,["type"])]),_:1}),t(r,{prop:"created_at",label:"创建时间","min-width":"180"}),t(r,{label:"操作",width:"120"},{default:s(n=>[t(l,{link:"",onClick:ce=>C(n.row.id)},{default:s(()=>e[12]||(e[12]=[_("查看")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[I,h.value]])]),_:1})])}}},ve=G(re,[["__scopeId","data-v-d605f1c3"]]);export{ve as default};
