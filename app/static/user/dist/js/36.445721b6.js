"use strict";(self["webpackChunkecodeco_user_client"]=self["webpackChunkecodeco_user_client"]||[]).push([[36],{15036:(e,r,t)=>{t.r(r),t.d(r,{default:()=>h});var n=t(56768),o=function(e){return(0,n.Qi)("data-v-3ab99c3e"),e=e(),(0,n.jt)(),e},a={class:"register-container"},i=o((function(){return(0,n.Lk)("h1",null,"用户注册",-1)})),l=o((function(){return(0,n.Lk)("div",{class:"agreement-content"},[(0,n.Lk)("h2",null,"用户协议"),(0,n.Lk)("p",null,"欢迎使用我们的环保家居商城服务...")],-1)})),u=o((function(){return(0,n.Lk)("div",{class:"agreement-content"},[(0,n.Lk)("h2",null,"隐私政策"),(0,n.Lk)("p",null,"我们重视您的隐私保护...")],-1)}));function s(e,r,t,o,s,d){var c=(0,n.g2)("el-input"),m=(0,n.g2)("el-form-item"),g=(0,n.g2)("el-link"),p=(0,n.g2)("el-checkbox"),f=(0,n.g2)("el-button"),b=(0,n.g2)("el-form"),h=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)("div",a,[i,(0,n.bF)(b,{model:s.registrationForm,rules:s.rules,ref:"registrationForm","label-width":"100px",class:"register-form"},{default:(0,n.k6)((function(){return[(0,n.bF)(m,{label:"用户名",prop:"username"},{default:(0,n.k6)((function(){return[(0,n.bF)(c,{modelValue:s.registrationForm.username,"onUpdate:modelValue":r[0]||(r[0]=function(e){return s.registrationForm.username=e}),placeholder:"请输入用户名"},null,8,["modelValue"])]})),_:1}),(0,n.bF)(m,{label:"手机号码",prop:"phone"},{default:(0,n.k6)((function(){return[(0,n.bF)(c,{modelValue:s.registrationForm.phone,"onUpdate:modelValue":r[1]||(r[1]=function(e){return s.registrationForm.phone=e}),placeholder:"请输入手机号码"},null,8,["modelValue"])]})),_:1}),(0,n.bF)(m,{label:"邮箱地址",prop:"email"},{default:(0,n.k6)((function(){return[(0,n.bF)(c,{modelValue:s.registrationForm.email,"onUpdate:modelValue":r[2]||(r[2]=function(e){return s.registrationForm.email=e}),placeholder:"请输入邮箱地址"},null,8,["modelValue"])]})),_:1}),(0,n.bF)(m,{label:"密码",prop:"password"},{default:(0,n.k6)((function(){return[(0,n.bF)(c,{modelValue:s.registrationForm.password,"onUpdate:modelValue":r[3]||(r[3]=function(e){return s.registrationForm.password=e}),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]})),_:1}),(0,n.bF)(m,{label:"确认密码",prop:"confirmPassword"},{default:(0,n.k6)((function(){return[(0,n.bF)(c,{modelValue:s.registrationForm.confirmPassword,"onUpdate:modelValue":r[4]||(r[4]=function(e){return s.registrationForm.confirmPassword=e}),type:"password",placeholder:"请再次输入密码","show-password":""},null,8,["modelValue"])]})),_:1}),(0,n.bF)(m,null,{default:(0,n.k6)((function(){return[(0,n.bF)(p,{modelValue:s.registrationForm.agreementChecked,"onUpdate:modelValue":r[5]||(r[5]=function(e){return s.registrationForm.agreementChecked=e})},{default:(0,n.k6)((function(){return[(0,n.eW)(" 我已阅读并同意 "),(0,n.bF)(g,{type:"primary",onClick:d.showAgreement},{default:(0,n.k6)((function(){return[(0,n.eW)("用户协议")]})),_:1},8,["onClick"]),(0,n.eW)(" 和 "),(0,n.bF)(g,{type:"primary",onClick:d.showPrivacyPolicy},{default:(0,n.k6)((function(){return[(0,n.eW)("隐私政策")]})),_:1},8,["onClick"])]})),_:1},8,["modelValue"])]})),_:1}),(0,n.bF)(m,null,{default:(0,n.k6)((function(){return[(0,n.bF)(f,{type:"primary",onClick:d.register,loading:s.loading,disabled:!s.registrationForm.agreementChecked},{default:(0,n.k6)((function(){return[(0,n.eW)("注册")]})),_:1},8,["onClick","loading","disabled"]),(0,n.bF)(f,{onClick:d.goToLogin},{default:(0,n.k6)((function(){return[(0,n.eW)("已有账号")]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"]),(0,n.bF)(h,{title:"用户协议",modelValue:s.agreementDialogVisible,"onUpdate:modelValue":r[6]||(r[6]=function(e){return s.agreementDialogVisible=e}),width:"60%"},{default:(0,n.k6)((function(){return[l]})),_:1},8,["modelValue"]),(0,n.bF)(h,{title:"隐私政策",modelValue:s.privacyDialogVisible,"onUpdate:modelValue":r[7]||(r[7]=function(e){return s.privacyDialogVisible=e}),width:"60%"},{default:(0,n.k6)((function(){return[u]})),_:1},8,["modelValue"])])}var d=t(14048),c=t(30388),m=t(41034),g=(t(16280),t(76918),t(44114),t(27495),t(90906),t(76031),t(60782));const p={name:"Register",data:function(){var e=this,r=function(r,t,n){t!==e.registrationForm.password?n(new Error("两次输入密码不一致")):n()},t=function(e,r,t){/^1[3-9]\d{9}$/.test(r)?t():t(new Error("请输入正确的手机号码"))};return{loading:!1,agreementDialogVisible:!1,privacyDialogVisible:!1,registrationForm:{username:"",phone:"",email:"",password:"",confirmPassword:"",agreementChecked:!1},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:r,trigger:"blur"}]}}},methods:(0,m.A)((0,m.A)({},(0,g.i0)("auth",["register"])),{},{register:function(){var e=this;this.$refs.registrationForm.validate(function(){var r=(0,c.A)((0,d.A)().mark((function r(t){var n;return(0,d.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t){r.next=20;break}if(e.registrationForm.agreementChecked){r.next=4;break}return e.$message.warning("请阅读并同意用户协议和隐私政策"),r.abrupt("return");case 4:return e.loading=!0,r.prev=5,r.next=8,e.$store.dispatch("auth/register",{username:e.registrationForm.username,phone:e.registrationForm.phone,email:e.registrationForm.email,password:e.registrationForm.password});case 8:n=r.sent,n.success?(e.$message.success("注册成功，即将跳转到登录页"),setTimeout((function(){e.$router.push("/login")}),2e3)):e.$message.error(n.message||"注册失败，请重试"),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](5),e.$message.error("注册失败："+(r.t0.message||"未知错误"));case 15:return r.prev=15,e.loading=!1,r.finish(15);case 18:r.next=21;break;case 20:return r.abrupt("return",!1);case 21:case"end":return r.stop()}}),r,null,[[5,12,15,18]])})));return function(e){return r.apply(this,arguments)}}())},goToLogin:function(){this.$router.push("/login")},showAgreement:function(){this.agreementDialogVisible=!0},showPrivacyPolicy:function(){this.privacyDialogVisible=!0}})};var f=t(71241);const b=(0,f.A)(p,[["render",s],["__scopeId","data-v-3ab99c3e"]]),h=b}}]);
//# sourceMappingURL=36.445721b6.js.map