{"version":3,"file":"js/232.a7725d67.js","mappings":"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","sources":["webpack://ecodeco-user-client/./src/views/Login.vue","webpack://ecodeco-user-client/./src/views/Login.vue?240b"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <h1>用户登录</h1>\n    \n    <el-form\n      :model=\"loginForm\"\n      :rules=\"rules\"\n      ref=\"loginForm\"\n      label-width=\"100px\"\n      class=\"login-form\"\n    >\n      <el-form-item label=\"账号\" prop=\"account\">\n        <el-input \n          v-model=\"loginForm.account\" \n          placeholder=\"请输入手机号或邮箱地址\"\n        ></el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"密码\" prop=\"password\">\n        <el-input\n          v-model=\"loginForm.password\"\n          type=\"password\"\n          placeholder=\"请输入密码\"\n          show-password\n        ></el-input>\n      </el-form-item>\n      \n      <el-form-item>\n        <el-checkbox v-model=\"loginForm.rememberMe\">记住我</el-checkbox>\n        <el-link type=\"primary\" class=\"forgot-link\" @click=\"forgotPassword\">忘记密码?</el-link>\n      </el-form-item>\n      \n      <el-form-item>\n        <el-button\n          type=\"primary\"\n          @click=\"login\"\n          :loading=\"loading\"\n          class=\"login-button\"\n        >登录</el-button>\n        <el-button @click=\"goToRegister\">注册账号</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\n\nexport default {\n  name: 'Login',\n  data() {\n    // 账号验证\n    const validateAccount = (rule, value, callback) => {\n      // 判断是邮箱还是手机号\n      const isEmail = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/.test(value)\n      const isPhone = /^1[3-9]\\d{9}$/.test(value)\n      \n      if (!isEmail && !isPhone) {\n        callback(new Error('请输入正确的手机号或邮箱地址'))\n      } else {\n        callback()\n      }\n    }\n    \n    return {\n      loading: false,\n      loginForm: {\n        account: '',\n        password: '',\n        rememberMe: false\n      },\n      rules: {\n        account: [\n          { required: true, message: '请输入手机号或邮箱地址', trigger: 'blur' },\n          { validator: validateAccount, trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, message: '密码长度不能小于6个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    ...mapActions('auth', ['login']),\n    \n    login() {\n      this.$refs.loginForm.validate(async (valid) => {\n        if (valid) {\n          this.loading = true\n          \n          try {\n            // 判断是邮箱还是手机号\n            const isEmail = this.loginForm.account.includes('@')\n            \n            const loginData = {\n              password: this.loginForm.password\n            }\n            \n            // 根据账号类型设置不同的字段\n            if (isEmail) {\n              loginData.email = this.loginForm.account\n            } else {\n              loginData.phone = this.loginForm.account\n            }\n            \n            console.log('正在提交登录数据:', loginData)\n            \n            const result = await this.$store.dispatch('auth/login', loginData)\n            \n            if (result.success) {\n              this.$message.success('登录成功')\n              \n              // 如果有重定向地址，跳转到重定向地址\n              const redirectPath = this.$route.query.redirect || '/'\n              this.$router.push(redirectPath)\n            } else {\n              this.$message.error(result.message || '登录失败，请检查账号和密码')\n            }\n          } catch (error) {\n            this.$message.error('登录失败：' + (error.message || '未知错误'))\n          } finally {\n            this.loading = false\n          }\n        } else {\n          return false\n        }\n      })\n    },\n    \n    goToRegister() {\n      this.$router.push('/register')\n    },\n    \n    forgotPassword() {\n      this.$message.info('密码重置功能正在开发中，请联系客服重置密码')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  max-width: 600px;\n  margin: 30px auto;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  background-color: #fff;\n}\n\n.login-container h1 {\n  text-align: center;\n  margin-bottom: 30px;\n  color: #4fd58e;\n}\n\n.login-button {\n  margin-right: 15px;\n}\n\n.forgot-link {\n  float: right;\n}\n\n/* 响应式样式 */\n@media (max-width: 768px) {\n  .login-container {\n    max-width: 90%;\n    margin: 20px auto;\n  }\n}\n\n/* 小屏幕手机适配 */\n@media (max-width: 480px) {\n  .login-container {\n    max-width: 100%;\n    margin: 15px auto;\n    padding: 15px;\n    box-shadow: none;\n  }\n  \n  .login-container h1 {\n    font-size: 20px;\n    margin-bottom: 20px;\n  }\n  \n  .el-form-item {\n    margin-bottom: 15px;\n  }\n  \n  .login-button {\n    width: 100%;\n    margin-right: 0;\n    margin-bottom: 10px;\n  }\n  \n  .el-button {\n    display: block;\n    width: 100%;\n  }\n}\n</style> ","import { render } from \"./Login.vue?vue&type=template&id=70afadef&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=70afadef&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-70afadef\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_el_form","model","$data","loginForm","rules","ref","_component_el_form_item","label","prop","_component_el_input","account","$event","placeholder","password","type","_component_el_checkbox","rememberMe","_component_el_link","onClick","$options","forgotPassword","_component_el_button","login","loading","goToRegister","name","data","validateAccount","rule","value","callback","isEmail","test","isPhone","Error","required","message","trigger","validator","min","methods","_objectSpread","mapActions","_this","this","$refs","validate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","valid","loginData","result","redirectPath","wrap","_context","prev","next","includes","email","phone","console","log","$store","dispatch","sent","success","$message","$route","query","redirect","$router","push","error","t0","finish","abrupt","stop","_x","apply","arguments","info","__exports__","render"],"sourceRoot":""}