{"version":3,"file":"js/403.3a432a43.js","mappings":"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","sources":["webpack://ecodeco-user-client/./src/views/Profile.vue","webpack://ecodeco-user-client/./src/views/Profile.vue?24e8"],"sourcesContent":["<template>\n  <div class=\"profile-container\">\n    <div class=\"profile-content\">\n      <div class=\"row\">\n        <div class=\"col-lg-4\">\n          <div class=\"profile-card\">\n            <div class=\"profile-card-body text-center\">\n              <img :src=\"userAvatar\" alt=\"用户头像\" class=\"avatar-img\">\n              <h5 class=\"my-3\">{{ user ? user.username : '加载中...' }}</h5>\n              <p class=\"text-muted mb-1\">{{ user ? user.email : '加载中...' }}</p>\n              <p class=\"text-muted mb-4\">会员等级: 普通会员</p>\n              <div class=\"action-buttons\">\n                <el-button type=\"primary\" @click=\"showEditDialog\">编辑资料</el-button>\n                <el-button @click=\"showPasswordDialog\">修改密码</el-button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-lg-8\">\n          <div class=\"profile-card\">\n            <div class=\"profile-card-body\">\n              <div class=\"info-row\">\n                <div class=\"info-label\">\n                  <p>用户名</p>\n                </div>\n                <div class=\"info-value\">\n                  <p class=\"text-muted\">{{ user ? user.username : '加载中...' }}</p>\n                </div>\n              </div>\n              <div class=\"divider\"></div>\n              <div class=\"info-row\">\n                <div class=\"info-label\">\n                  <p>邮箱</p>\n                </div>\n                <div class=\"info-value\">\n                  <p class=\"text-muted\">{{ user ? user.email : '加载中...' }}</p>\n                </div>\n              </div>\n              <div class=\"divider\"></div>\n              <div class=\"info-row\">\n                <div class=\"info-label\">\n                  <p>手机号</p>\n                </div>\n                <div class=\"info-value\">\n                  <p class=\"text-muted\">{{ user && user.phone ? user.phone : '未设置' }}</p>\n                </div>\n              </div>\n              <div class=\"divider\"></div>\n              <div class=\"info-row\">\n                <div class=\"info-label\">\n                  <p>注册时间</p>\n                </div>\n                <div class=\"info-value\">\n                  <p class=\"text-muted\">{{ user && user.created_at ? formatDate(user.created_at) : '未知' }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 编辑资料对话框 -->\n    <el-dialog\n      title=\"编辑个人资料\"\n      v-model=\"editDialogVisible\"\n      width=\"500px\"\n    >\n      <el-form :model=\"editForm\" label-width=\"80px\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"editForm.username\" placeholder=\"请输入用户名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"头像\">\n          <div class=\"avatar-upload\">\n            <img :src=\"editForm.avatarPreview || userAvatar\" class=\"avatar-preview\" />\n            <el-upload\n              class=\"avatar-uploader\"\n              action=\"#\"\n              :show-file-list=\"false\"\n              :before-upload=\"beforeAvatarUpload\"\n              :http-request=\"handleAvatarUpload\"\n            >\n              <el-button type=\"primary\">选择图片</el-button>\n            </el-upload>\n          </div>\n        </el-form-item>\n        <el-form-item label=\"手机号\">\n          <el-input v-model=\"editForm.phone\" placeholder=\"请输入手机号\"></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"editDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"updateProfile\" :loading=\"updating\">\n            保存\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n\n    <!-- 修改密码对话框 -->\n    <el-dialog\n      title=\"修改密码\"\n      v-model=\"passwordDialogVisible\"\n      width=\"500px\"\n    >\n      <el-form :model=\"passwordForm\" label-width=\"100px\" :rules=\"passwordRules\" ref=\"passwordFormRef\">\n        <el-form-item label=\"当前密码\" prop=\"currentPassword\">\n          <el-input v-model=\"passwordForm.currentPassword\" type=\"password\" show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"newPassword\">\n          <el-input v-model=\"passwordForm.newPassword\" type=\"password\" show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认新密码\" prop=\"confirmPassword\">\n          <el-input v-model=\"passwordForm.confirmPassword\" type=\"password\" show-password></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"passwordDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"updatePassword\" :loading=\"updatingPassword\">\n            保存\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'Profile',\n  data() {\n    // 密码验证\n    const validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入新密码'));\n      } else {\n        if (this.passwordForm.confirmPassword !== '') {\n          this.$refs.passwordFormRef.validateField('confirmPassword');\n        }\n        callback();\n      }\n    };\n    const validatePass2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== this.passwordForm.newPassword) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      editDialogVisible: false,\n      passwordDialogVisible: false,\n      updating: false,\n      updatingPassword: false,\n      editForm: {\n        username: '',\n        avatar: null,\n        avatarPreview: '',\n        phone: '',\n      },\n      passwordForm: {\n        currentPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      },\n      passwordRules: {\n        currentPassword: [\n          { required: true, message: '请输入当前密码', trigger: 'blur' }\n        ],\n        newPassword: [\n          { required: true, message: '请输入新密码', trigger: 'blur' },\n          { min: 6, message: '密码长度不能小于6位', trigger: 'blur' },\n          { validator: validatePass, trigger: 'blur' }\n        ],\n        confirmPassword: [\n          { required: true, message: '请再次输入新密码', trigger: 'blur' },\n          { validator: validatePass2, trigger: 'blur' }\n        ]\n      }\n    };\n  },\n  computed: {\n    ...mapGetters({\n      user: 'auth/currentUser'\n    }),\n    userAvatar() {\n      return this.user && this.user.avatar \n        ? this.user.avatar \n        : 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png';\n    }\n  },\n  methods: {\n    formatDate(dateString) {\n      if (!dateString) return '未知';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('zh-CN');\n    },\n    showEditDialog() {\n      if (this.user) {\n        this.editForm.username = this.user.username || '';\n        this.editForm.phone = this.user.phone || '';\n        this.editForm.avatarPreview = '';\n        this.editForm.avatar = null;\n      }\n      this.editDialogVisible = true;\n    },\n    showPasswordDialog() {\n      this.passwordForm.currentPassword = '';\n      this.passwordForm.newPassword = '';\n      this.passwordForm.confirmPassword = '';\n      this.passwordDialogVisible = true;\n    },\n    beforeAvatarUpload(file) {\n      const isImage = file.type.startsWith('image/');\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isImage) {\n        this.$message.error('上传头像图片只能是图片格式!');\n        return false;\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n        return false;\n      }\n      return true;\n    },\n    handleAvatarUpload(option) {\n      const file = option.file;\n      // 读取文件并预览\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        this.editForm.avatarPreview = e.target.result;\n        this.editForm.avatar = file;\n      };\n      reader.readAsDataURL(file);\n    },\n    async updateProfile() {\n      try {\n        this.updating = true;\n        \n        // 准备要更新的数据\n        const userData = {\n          username: this.editForm.username,\n          phone: this.editForm.phone || ''\n        };\n        \n        // 在实际应用中，头像上传应该先调用上传API，获取URL后再保存\n        // 暂时简化处理\n        \n        // 获取存储的token\n        const token = localStorage.getItem('token');\n        \n        // 调用API更新个人资料，添加授权头\n        const response = await this.$axios.post('/api/user/update', userData, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (response.data && response.data.code === 200) {\n          // 更新成功，更新Vuex中的用户信息\n          const updatedUser = {\n            ...this.user,\n            username: this.editForm.username,\n            phone: this.editForm.phone,\n          };\n          \n          // 如果有新头像，更新头像 (实际项目中应该先上传头像获取URL)\n          if (this.editForm.avatarPreview) {\n            updatedUser.avatar = this.editForm.avatarPreview;\n          }\n          \n          // 更新Vuex中的用户信息\n          this.$store.commit('auth/SET_USER', updatedUser);\n          \n          // 保存到本地存储\n          localStorage.setItem('user', JSON.stringify(updatedUser));\n          \n          this.$message.success('个人资料更新成功');\n          this.editDialogVisible = false;\n        } else {\n          this.$message.error(response.data.msg || '更新失败，请稍后重试');\n        }\n      } catch (error) {\n        console.error('更新个人资料失败:', error);\n        this.$message.error('更新失败: ' + (error.message || '服务器错误'));\n      } finally {\n        this.updating = false;\n      }\n    },\n    async updatePassword() {\n      try {\n        // 表单验证\n        await this.$refs.passwordFormRef.validate();\n        \n        this.updatingPassword = true;\n        \n        // 调用API更新密码\n        // 现在是模拟成功\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        \n        this.$message.success('密码修改成功');\n        this.passwordDialogVisible = false;\n      } catch (error) {\n        if (error && error.message) {\n          this.$message.error('修改失败: ' + error.message);\n        }\n      } finally {\n        this.updatingPassword = false;\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.profile-container {\n  min-height: 100vh;\n  background-color: #f8f9fa;\n  padding: 40px 20px;\n}\n\n.profile-content {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.row {\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0 -15px;\n}\n\n.col-lg-4 {\n  width: 33.333%;\n  padding: 0 15px;\n}\n\n.col-lg-8 {\n  width: 66.667%;\n  padding: 0 15px;\n}\n\n.profile-card {\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  margin-bottom: 25px;\n}\n\n.profile-card-body {\n  padding: 20px;\n}\n\n.avatar-img {\n  width: 150px;\n  height: 150px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-bottom: 15px;\n}\n\n.my-3 {\n  margin-top: 15px;\n  margin-bottom: 15px;\n}\n\n.mb-1 {\n  margin-bottom: 5px;\n}\n\n.mb-4 {\n  margin-bottom: 20px;\n}\n\n.text-muted {\n  color: #6c757d;\n}\n\n.action-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n}\n\n.info-row {\n  display: flex;\n  margin-bottom: 10px;\n}\n\n.info-label {\n  width: 30%;\n}\n\n.info-value {\n  width: 70%;\n}\n\n.divider {\n  height: 1px;\n  background-color: #e9ecef;\n  margin: 10px 0;\n}\n\n.avatar-upload {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.avatar-preview {\n  width: 100px;\n  height: 100px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 1px solid #ddd;\n}\n\n@media (max-width: 992px) {\n  .col-lg-4, .col-lg-8 {\n    width: 100%;\n  }\n}\n</style> ","import { render } from \"./Profile.vue?vue&type=template&id=68369aa1&scoped=true\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=68369aa1&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-68369aa1\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","src","$options","userAvatar","alt","_hoisted_8","_toDisplayString","_ctx","user","username","_hoisted_9","email","_hoisted_10","_hoisted_11","_createVNode","_component_el_button","type","onClick","showEditDialog","showPasswordDialog","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","phone","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","created_at","formatDate","_component_el_dialog","title","$data","editDialogVisible","$event","width","footer","_withCtx","_hoisted_36","_cache","updateProfile","loading","updating","_component_el_form","model","editForm","_component_el_form_item","label","_component_el_input","placeholder","_hoisted_34","avatarPreview","_component_el_upload","action","beforeAvatarUpload","handleAvatarUpload","passwordDialogVisible","_hoisted_37","updatePassword","updatingPassword","passwordForm","rules","passwordRules","ref","prop","currentPassword","newPassword","confirmPassword","name","data","_this","validatePass","rule","value","callback","Error","$refs","passwordFormRef","validateField","validatePass2","avatar","required","message","trigger","min","validator","computed","_objectSpread","mapGetters","this","methods","dateString","date","Date","toLocaleDateString","file","isImage","startsWith","isLt2M","size","$message","error","option","_this2","reader","FileReader","onload","e","target","result","readAsDataURL","_this3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userData","token","response","updatedUser","wrap","_context","prev","next","localStorage","getItem","$axios","post","headers","concat","sent","code","$store","commit","setItem","JSON","stringify","success","msg","t0","console","finish","stop","_this4","_callee2","_context2","validate","Promise","resolve","setTimeout","__exports__","render"],"sourceRoot":""}