import{a as c}from"./index-t--hEgTQ.js";import{E as r}from"./index-gpBZUzsn.js";const n=c.create({baseURL:"",timeout:1e4});n.interceptors.request.use(e=>{const o=localStorage.getItem("token");return o?(console.log("添加Authorization头:",o),e.headers.Authorization=`Bearer ${o}`):console.log("未找到token"),console.log("请求配置:",e.url,e.method,e.headers,e.params||e.data),e},e=>(console.error("Request error:",e),Promise.reject(e)));n.interceptors.response.use(e=>(console.log("响应数据:",e.config.url,e.data),e.data),e=>{var t,a;console.error("Response error:",(t=e.config)==null?void 0:t.url,e.message,(a=e.response)==null?void 0:a.data);const{response:o}=e;if(o){const{status:l,data:s}=o;switch(l){case 400:r.error(s.message||"请求参数错误");break;case 401:r.error("登录已过期，请重新登录"),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),window.location.pathname!=="/login"&&(window.location.href="/login");break;case 403:r.error("您没有权限执行此操作");break;case 404:r.error("请求的资源不存在");break;case 500:r.error("服务器内部错误");break;default:r.error(s.message||"未知错误")}}else r.error("网络错误，请检查您的网络连接");return Promise.reject(e)});export{n as h};
