"use strict";(self["webpackChunkecodeco_user_client"]=self["webpackChunkecodeco_user_client"]||[]).push([[232],{1851:(e,r,n)=>{n.r(r),n.d(r,{default:()=>p});var o=n(56768),t=function(e){return(0,o.Qi)("data-v-70afadef"),e=e(),(0,o.jt)(),e},a={class:"login-container"},l=t((function(){return(0,o.Lk)("h1",null,"用户登录",-1)}));function u(e,r,n,t,u,i){var s=(0,o.g2)("el-input"),c=(0,o.g2)("el-form-item"),d=(0,o.g2)("el-checkbox"),g=(0,o.g2)("el-link"),f=(0,o.g2)("el-button"),m=(0,o.g2)("el-form");return(0,o.uX)(),(0,o.CE)("div",a,[l,(0,o.bF)(m,{model:u.loginForm,rules:u.rules,ref:"loginForm","label-width":"100px",class:"login-form"},{default:(0,o.k6)((function(){return[(0,o.bF)(c,{label:"账号",prop:"account"},{default:(0,o.k6)((function(){return[(0,o.bF)(s,{modelValue:u.loginForm.account,"onUpdate:modelValue":r[0]||(r[0]=function(e){return u.loginForm.account=e}),placeholder:"请输入手机号或邮箱地址"},null,8,["modelValue"])]})),_:1}),(0,o.bF)(c,{label:"密码",prop:"password"},{default:(0,o.k6)((function(){return[(0,o.bF)(s,{modelValue:u.loginForm.password,"onUpdate:modelValue":r[1]||(r[1]=function(e){return u.loginForm.password=e}),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]})),_:1}),(0,o.bF)(c,null,{default:(0,o.k6)((function(){return[(0,o.bF)(d,{modelValue:u.loginForm.rememberMe,"onUpdate:modelValue":r[2]||(r[2]=function(e){return u.loginForm.rememberMe=e})},{default:(0,o.k6)((function(){return[(0,o.eW)("记住我")]})),_:1},8,["modelValue"]),(0,o.bF)(g,{type:"primary",class:"forgot-link",onClick:i.forgotPassword},{default:(0,o.k6)((function(){return[(0,o.eW)("忘记密码?")]})),_:1},8,["onClick"])]})),_:1}),(0,o.bF)(c,null,{default:(0,o.k6)((function(){return[(0,o.bF)(f,{type:"primary",onClick:i.login,loading:u.loading,class:"login-button"},{default:(0,o.k6)((function(){return[(0,o.eW)("登录")]})),_:1},8,["onClick","loading"]),(0,o.bF)(f,{onClick:i.goToRegister},{default:(0,o.k6)((function(){return[(0,o.eW)("注册账号")]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])])}var i=n(14048),s=n(30388),c=n(41034),d=(n(16280),n(76918),n(74423),n(44114),n(27495),n(90906),n(21699),n(60782));const g={name:"Login",data:function(){var e=function(e,r,n){var o=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r),t=/^1[3-9]\d{9}$/.test(r);o||t?n():n(new Error("请输入正确的手机号或邮箱地址"))};return{loading:!1,loginForm:{account:"",password:"",rememberMe:!1},rules:{account:[{required:!0,message:"请输入手机号或邮箱地址",trigger:"blur"},{validator:e,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6个字符",trigger:"blur"}]}}},methods:(0,c.A)((0,c.A)({},(0,d.i0)("auth",["login"])),{},{login:function(){var e=this;this.$refs.loginForm.validate(function(){var r=(0,s.A)((0,i.A)().mark((function r(n){var o,t,a,l;return(0,i.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n){r.next=21;break}return e.loading=!0,r.prev=2,o=e.loginForm.account.includes("@"),t={password:e.loginForm.password},o?t.email=e.loginForm.account:t.phone=e.loginForm.account,console.log("正在提交登录数据:",t),r.next=9,e.$store.dispatch("auth/login",t);case 9:a=r.sent,a.success?(e.$message.success("登录成功"),l=e.$route.query.redirect||"/",e.$router.push(l)):e.$message.error(a.message||"登录失败，请检查账号和密码"),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](2),e.$message.error("登录失败："+(r.t0.message||"未知错误"));case 16:return r.prev=16,e.loading=!1,r.finish(16);case 19:r.next=22;break;case 21:return r.abrupt("return",!1);case 22:case"end":return r.stop()}}),r,null,[[2,13,16,19]])})));return function(e){return r.apply(this,arguments)}}())},goToRegister:function(){this.$router.push("/register")},forgotPassword:function(){this.$message.info("密码重置功能正在开发中，请联系客服重置密码")}})};var f=n(71241);const m=(0,f.A)(g,[["render",u],["__scopeId","data-v-70afadef"]]),p=m}}]);
//# sourceMappingURL=232.a7725d67.js.map