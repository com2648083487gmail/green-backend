import{r as y,a as p,c as V,b as a,d as o,w as r,e as t,u as x,o as h,f as k,g as L,E as f}from"./index-onYwJO-V.js";import{u as B}from"./user-3oDjFnb1.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-t--hEgTQ.js";const E={class:"login-container"},F={class:"login-card"},N={__name:"Login",setup(R){const _=x(),g=B(),s=y({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},n=p(null),i=p(!1),c=async()=>{if(n.value)try{await n.value.validate(),i.value=!0;const l=await g.login(s);l.success?(f.success("登录成功"),_.push("/")):f.error(l.message)}catch(l){console.error("Login form validation failed:",l)}finally{i.value=!1}};return(l,e)=>{const m=t("el-input"),u=t("el-form-item"),w=t("el-button"),b=t("el-form");return h(),V("div",E,[a("div",F,[e[3]||(e[3]=a("div",{class:"login-header"},[a("h2",{class:"login-title"},"绿野鲜踪管理系统"),a("p",{class:"login-subtitle"},"管理员登录")],-1)),o(b,{ref_key:"loginFormRef",ref:n,model:s,rules:v,"label-position":"top",class:"login-form"},{default:r(()=>[o(u,{label:"用户名",prop:"username"},{default:r(()=>[o(m,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=d=>s.username=d),placeholder:"请输入用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1}),o(u,{label:"密码",prop:"password"},{default:r(()=>[o(m,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=d=>s.password=d),type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":"",onKeyup:k(c,["enter"])},null,8,["modelValue"])]),_:1}),o(u,null,{default:r(()=>[o(w,{type:"primary",loading:i.value,class:"login-button",onClick:c},{default:r(()=>e[2]||(e[2]=[L(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},I=C(N,[["__scopeId","data-v-1da94172"]]);export{I as default};
