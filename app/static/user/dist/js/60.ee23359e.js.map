{"version":3,"file":"js/60.ee23359e.js","mappings":"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","sources":["webpack://ecodeco-user-client/./src/views/Orders.vue","webpack://ecodeco-user-client/./src/views/Orders.vue?3d0e"],"sourcesContent":["<template>\n    <div class=\"orders-page\">\n      <div class=\"container\">\n        <div class=\"page-header\">\n          <h1>我的订单</h1>\n        </div>\n        \n        <div v-if=\"loading\" class=\"loading-container\">\n          <el-skeleton :rows=\"5\" animated />\n        </div>\n        \n        <div v-else-if=\"error\" class=\"error-container\">\n          <el-empty description=\"加载订单失败\">\n            <el-button type=\"primary\" @click=\"fetchOrders\">重试</el-button>\n          </el-empty>\n        </div>\n        \n        <div v-else-if=\"orders.length === 0\" class=\"empty-container\">\n          <el-empty description=\"您还没有订单\">\n            <el-button type=\"primary\" @click=\"$router.push('/products')\">去购物</el-button>\n          </el-empty>\n        </div>\n        \n        <div v-else class=\"orders-list\">\n          <el-card v-for=\"order in orders\" :key=\"order.id\" class=\"order-card\">\n            <div class=\"order-header\">\n              <div class=\"order-info\">\n                <span class=\"order-number\">订单号: {{ order.order_number }}</span>\n                <span class=\"order-date\">下单时间: {{ formatDate(order.created_at) }}</span>\n              </div>\n              <div class=\"order-status\" :class=\"'status-' + order.status\">\n                {{ getStatusText(order.status) }}\n              </div>\n            </div>\n            \n            <div class=\"order-items\">\n              <div v-for=\"item in order.items\" :key=\"item.id\" class=\"order-item\">\n                <div class=\"item-info\">\n                  <el-image \n                    :src=\"getOrderItemImageUrl(item)\" \n                    :alt=\"item.name\" \n                    class=\"item-image\"\n                    @error=\"handleImageError\">\n                    <template #error>\n                      <div class=\"image-error-slot\">\n                        <i class=\"el-icon-picture-outline\"></i>\n                      </div>\n                    </template>\n                  </el-image>\n                  <div class=\"item-details\">\n                    <h4>{{ item.name }}</h4>\n                    <div v-if=\"item.eco_certification || item.is_recyclable\" class=\"item-tags\">\n                      <el-tag v-if=\"item.eco_certification\" size=\"small\" type=\"success\">\n                        {{ item.eco_certification }}\n                      </el-tag>\n                      <el-tag v-if=\"item.is_recyclable\" size=\"small\" type=\"info\">可回收</el-tag>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"item-price\">¥{{ item.price && !isNaN(item.price) ? Number(item.price).toFixed(2) : '0.00' }}</div>\n                <div class=\"item-quantity\">x {{ item.quantity && !isNaN(item.quantity) ? Number(item.quantity) : 0 }}</div>\n              </div>\n            </div>\n            \n            <div class=\"order-footer\">\n              <div class=\"order-total\">\n                <span>共 {{ getTotalItems(order) }} 件商品，总计：</span>\n                <span class=\"price\">¥{{ getTotalPrice(order).toFixed(2) }}</span>\n              </div>\n              \n              <div class=\"order-actions\">\n                <el-button \n                  v-if=\"order.status === 'pending'\" \n                  type=\"primary\" \n                  size=\"small\"\n                  @click=\"payOrder(order)\">\n                  立即付款\n                </el-button>\n\n                <!-- 取消订单 -->\n                <el-button \n                  v-if=\"order.status === 'pending'\" \n                  type=\"danger\" \n                  size=\"small\"\n                  @click=\"cancelOrder(order)\">\n                  取消订单\n                </el-button>\n                \n                <el-button \n                  v-if=\"order.status === 'shipped'\" \n                  type=\"success\"\n                  size=\"small\"\n                  @click=\"confirmReceipt(order)\">\n                  确认收货\n                </el-button>\n                \n                <el-button \n                  v-if=\"order.status === 'completed'\" \n                  type=\"warning\"\n                  size=\"small\"\n                  @click=\"reviewOrder(order)\">\n                  评价\n                </el-button>\n              </div>\n            </div>\n          </el-card>\n          \n          <div class=\"pagination-container\">\n            <el-pagination\n              v-if=\"totalPages > 1\"\n              :current-page=\"currentPage\"\n              :page-size=\"10\"\n              :total=\"totalOrders\"\n              @current-change=\"handlePageChange\"\n              layout=\"prev, pager, next\">\n            </el-pagination>\n          </div>\n        </div>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import { ref, computed, onMounted } from 'vue'\n  import { useStore } from 'vuex'\n  import { useRouter } from 'vue-router'\n  import { ElMessage, ElMessageBox } from 'element-plus'\n  import { getFullImageUrl } from '../utils/index'\n  import axios from 'axios'\n  \n  export default {\n    name: 'Orders',\n    setup() {\n      const store = useStore()\n      const router = useRouter()\n      \n      const orders = ref([])\n      const loading = ref(false)\n      const error = ref(false)\n      const currentPage = ref(1)\n      const totalOrders = ref(0)\n      const totalPages = ref(0)\n      \n      // 获取用户订单列表\n      const fetchOrders = async (page = 1) => {\n        loading.value = true\n        error.value = false\n        \n        try {\n          // 从localStorage中获取认证令牌\n          const token = localStorage.getItem('token')\n          \n          // 调用API获取订单数据\n          const response = await axios.get('/api/orders/list', {\n            params: { page: page, size: 10 },\n            headers: token ? { 'Authorization': `Bearer ${token}` } : {}\n          })\n          \n          console.log('订单列表API返回:', response.data)\n          \n          if (response.data && response.data.code === 200 && response.data.data && response.data.data.list) {\n            orders.value = response.data.data.list\n            totalOrders.value = response.data.data.total || 0\n            totalPages.value = Math.ceil(totalOrders.value / 10)\n          } else if (response.data && response.data.code === 200 && Array.isArray(response.data.data)) {\n            // 另一种可能的API返回格式：直接返回数组\n            orders.value = response.data.data\n            totalOrders.value = response.data.data.length\n            totalPages.value = 1\n          } else {\n            console.warn('API返回格式不符合预期:', response.data)\n            orders.value = []\n            totalOrders.value = 0\n            totalPages.value = 0\n          }\n        } catch (err) {\n          console.error('获取订单失败:', err)\n          error.value = true\n          orders.value = []\n          // 如果是401错误，可能是未登录\n          if (err.response && err.response.status === 401) {\n            ElMessage.warning('请先登录后查看订单')\n            router.push('/login?redirect=/orders')\n          } else {\n            ElMessage.error('获取订单失败，请重试')\n          }\n        } finally {\n          loading.value = false\n        }\n      }\n      \n      // 计算订单商品总数\n      const getTotalItems = (order) => {\n        if (!order || !order.items || !Array.isArray(order.items)) {\n          return 0;\n        }\n        return order.items.reduce((total, item) => total + (Number(item.quantity) || 0), 0);\n      }\n      \n      // 计算订单总价\n      const getTotalPrice = (order) => {\n        if (!order || !order.items || !Array.isArray(order.items)) {\n          return 0;\n        }\n        \n        return order.items.reduce((total, item) => {\n          const price = Number(item.price) || 0;\n          const quantity = Number(item.quantity) || 0;\n          return total + (price * quantity);\n        }, 0);\n      }\n      \n      // 格式化日期\n      const formatDate = (dateString) => {\n        try {\n          if (!dateString) {\n            return '暂无日期';\n          }\n          \n          // 尝试创建日期对象\n          const date = new Date(dateString);\n          \n          // 检查日期是否有效\n          if (isNaN(date.getTime())) {\n            return dateString; // 如果无效则返回原始字符串\n          }\n          \n          // 使用更可靠的方式格式化日期\n          const year = date.getFullYear();\n          const month = String(date.getMonth() + 1).padStart(2, '0');\n          const day = String(date.getDate()).padStart(2, '0');\n          const hours = String(date.getHours()).padStart(2, '0');\n          const minutes = String(date.getMinutes()).padStart(2, '0');\n          \n          return `${year}-${month}-${day} ${hours}:${minutes}`;\n        } catch (err) {\n          return '日期格式错误';\n        }\n      }\n      \n      // 获取订单状态文本\n      const getStatusText = (status) => {\n        const statusMap = {\n          'pending': '待付款',\n          'paid': '已付款',\n          'processing': '处理中',\n          'shipped': '已发货',\n          'completed': '已完成',\n          'cancelled': '已取消', \n          'canceled': '已取消'    // ✅ 新增美式拼写，兼容后端\n        }\n        return statusMap[status] || '未知状态'\n      }\n      \n      // 处理页码变化\n      const handlePageChange = (page) => {\n        currentPage.value = page\n        fetchOrders(page)\n      }\n      \n      // 支付订单\n      const payOrder = (order) => {\n        try {\n          ElMessageBox.confirm(\n            `确认支付订单金额 ¥${getTotalPrice(order).toFixed(2)} ?`,\n            '确认支付',\n            {\n              confirmButtonText: '确认',\n              cancelButtonText: '取消',\n              type: 'warning'\n            }\n          ).then(async () => {\n            // 显示加载中\n            ElMessage({\n              message: '正在处理支付...',\n              type: 'info',\n              duration: 1500\n            });\n            \n            try {\n              // 调用支付API\n              const token = localStorage.getItem('token');\n              \n              // 检查订单ID是否存在\n              if (!order.id && !order.order_id) {\n                console.error('订单ID不存在:', order);\n                ElMessage.error('无法支付订单：订单ID不存在');\n                return;\n              }\n              \n              // 获取正确的订单ID (优先使用order_id字段)\n              const orderId = order.order_id || order.id;\n              console.log('使用的订单ID:', orderId, '原始订单:', order);\n              \n              // 调用订单支付API\n              const response = await axios.post(\n                '/api/orders/pay', \n                { order_id: orderId },\n                { headers: token ? { 'Authorization': `Bearer ${token}` } : {} }\n              );\n              \n              if (response.data && response.data.code === 200) {\n                ElMessage.success('支付成功');\n                // 刷新订单列表\n                fetchOrders(currentPage.value);\n              } else {\n                ElMessage.error(response.data.message || '支付失败，请重试');\n              }\n            } catch (error) {\n              console.error('支付失败:', error);\n              ElMessage.error('支付失败，请重试');\n            }\n          }).catch(() => {\n            // 用户取消支付\n          });\n        } catch (error) {\n          console.error('启动支付流程失败:', error);\n          ElMessage.error('启动支付流程失败');\n        }\n      }\n\n      // 取消订单\n      const cancelOrder = (order) => {\n        ElMessageBox.confirm(\n          '是否确认取消该订单？',\n          '取消订单',\n          {\n            confirmButtonText: '确认',\n            cancelButtonText: '返回',\n            type: 'warning'\n          }\n        ).then(async () => {\n          try {\n            const token = localStorage.getItem('token');\n            const orderId = order.order_id || order.id;\n\n            const response = await axios.put(\n              `/api/orders/${orderId}/status`,\n              { status: 'canceled' },\n              { headers: token ? { Authorization: `Bearer ${token}` } : {} }\n            );\n\n            if (response.data && response.data.code === 200) {\n              ElMessage.success('订单已取消');\n              fetchOrders(currentPage.value);\n            } else {\n              ElMessage.error(response.data.message || '取消失败');\n            }\n          } catch (error) {\n            console.error('取消订单失败:', error);\n            ElMessage.error('取消订单失败');\n          }\n        }).catch(() => {\n          // 用户取消操作\n        });\n      }\n      \n      // 确认收货\n      const confirmReceipt = (order) => {\n        ElMessageBox.confirm(\n          '确认已收到商品?',\n          '确认收货',\n          {\n            confirmButtonText: '确认',\n            cancelButtonText: '取消',\n            type: 'info'\n          }\n        ).then(() => {\n          // 这里应该调用API修改订单状态\n          ElMessage.success('确认收货成功')\n          // 重新获取订单列表\n          fetchOrders(currentPage.value)\n        }).catch(() => {\n          // 用户取消操作\n        })\n      }\n      \n      // 评价订单\n      const reviewOrder = (order) => {\n        // 获取正确的订单ID (优先使用order_id字段)\n        const orderId = order.order_id || order.id;\n        router.push(`/review?order_id=${orderId}`)\n      }\n      \n      // 获取订单项图片URL\n      const getOrderItemImageUrl = (item) => {\n        // 如果item是一个有效的订单项\n        if (!item) return '/img/default-product.png';\n        \n        // 尝试获取不同位置的图片URL\n        let imageUrl = null;\n        \n        // 直接获取image_url\n        if (item.image_url) {\n          imageUrl = item.image_url;\n        } \n        // 尝试从product对象中获取\n        else if (item.product && item.product.image_url) {\n          imageUrl = item.product.image_url;\n        }\n        // 尝试获取其他可能的图片字段\n        else if (item.product && item.product.image) {\n          imageUrl = item.product.image;\n        }\n        else if (item.product && item.product.images && item.product.images.length > 0) {\n          imageUrl = item.product.images[0];\n        }\n        else if (item.image) {\n          imageUrl = item.image;\n        }\n        // 如果没有找到图片，使用默认图片\n        else {\n          console.log('订单项没有图片:', item);\n          return '/img/default-product.png';\n        }\n        \n        return getFullImageUrl(imageUrl);\n      }\n      \n      // 处理图片加载错误\n      const handleImageError = () => {\n        // 图片加载出错时的处理\n        console.warn('订单项图片加载失败');\n      }\n      \n      onMounted(() => {\n        fetchOrders()\n      })\n      \n      return {\n        orders,\n        loading,\n        error,\n        currentPage,\n        totalOrders,\n        totalPages,\n        getTotalItems,\n        getTotalPrice,\n        formatDate,\n        getStatusText,\n        handlePageChange,\n        fetchOrders,\n        payOrder,\n        cancelOrder,\n        confirmReceipt,\n        reviewOrder,\n        getOrderItemImageUrl,\n        handleImageError\n      }\n    }\n  }\n  </script>\n  \n  <style scoped>\n  .orders-page {\n    padding: 20px 0 40px;\n  }\n  \n  .page-header {\n    margin-bottom: 30px;\n  }\n  \n  .page-header h1 {\n    color: #4fd58e;\n  }\n  \n  .loading-container, .error-container, .empty-container {\n    padding: 40px 0;\n    text-align: center;\n  }\n  \n  .order-card {\n    margin-bottom: 20px;\n  }\n  \n  .order-header {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 15px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #EBEEF5;\n  }\n  \n  .order-number {\n    font-weight: bold;\n    margin-right: 15px;\n  }\n  \n  .order-status {\n    font-weight: bold;\n  }\n  \n  .status-pending {\n    color: #E6A23C;\n  }\n  \n  .status-paid, .status-processing {\n    color: #409EFF;\n  }\n  \n  .status-shipped {\n    color: #4fd58e;\n  }\n  \n  .status-completed {\n    color: #4fd58e;\n  }\n  \n  .status-cancelled {\n    color: #F56C6C;\n  }\n  \n  .order-items {\n    margin-bottom: 15px;\n  }\n  \n  .order-item {\n    display: flex;\n    align-items: center;\n    padding: 10px 0;\n    border-bottom: 1px dashed #EBEEF5;\n  }\n  \n  .order-item:last-child {\n    border-bottom: none;\n  }\n  \n  .item-info {\n    display: flex;\n    align-items: center;\n    flex: 1;\n  }\n  \n  .item-image {\n    width: 60px;\n    height: 60px;\n    margin-right: 15px;\n    object-fit: cover;\n  }\n  \n  .image-error-slot {\n    width: 60px;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #f5f7fa;\n    color: #909399;\n    font-size: 24px;\n    margin-right: 15px;\n  }\n  \n  .item-details h4 {\n    margin: 0 0 5px;\n    font-size: 14px;\n    color: #303133;\n  }\n  \n  .item-tags {\n    margin-top: 5px;\n  }\n  \n  .item-tags .el-tag {\n    margin-right: 5px;\n  }\n  \n  .item-price {\n    width: 100px;\n    text-align: center;\n    color: #F56C6C;\n    font-weight: bold;\n  }\n  \n  .item-quantity {\n    width: 80px;\n    text-align: center;\n    color: #606266;\n  }\n  \n  .order-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 15px;\n    padding-top: 15px;\n    border-top: 1px solid #EBEEF5;\n  }\n  \n  .order-total {\n    font-size: 14px;\n  }\n  \n  .order-total .price {\n    font-size: 18px;\n    color: #F56C6C;\n    font-weight: bold;\n  }\n  \n  .order-actions button {\n    margin-left: 10px;\n  }\n  \n  .pagination-container {\n    margin-top: 30px;\n    display: flex;\n    justify-content: center;\n  }\n  </style>","import { render } from \"./Orders.vue?vue&type=template&id=556d4f6b&scoped=true\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\n\nimport \"./Orders.vue?vue&type=style&index=0&id=556d4f6b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-556d4f6b\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","$setup","loading","_hoisted_4","_createVNode","_component_el_skeleton","rows","animated","error","_hoisted_5","_component_el_empty","description","_component_el_button","type","onClick","fetchOrders","orders","length","_hoisted_6","_cache","$event","_ctx","$router","push","_hoisted_7","_Fragment","_renderList","order","_createBlock","_component_el_card","key","id","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","order_number","_hoisted_11","formatDate","created_at","_normalizeClass","status","getStatusText","_hoisted_12","items","item","_hoisted_13","_component_el_image","src","getOrderItemImageUrl","alt","name","onError","handleImageError","_withCtx","_hoisted_14","_hoisted_15","eco_certification","is_recyclable","_hoisted_16","_component_el_tag","size","_hoisted_17","price","isNaN","Number","toFixed","_hoisted_18","quantity","_hoisted_19","_hoisted_20","getTotalItems","_hoisted_21","getTotalPrice","_hoisted_22","payOrder","cancelOrder","confirmReceipt","reviewOrder","_hoisted_23","totalPages","_component_el_pagination","currentPage","total","totalOrders","onCurrentChange","handlePageChange","layout","setup","useStore","router","useRouter","ref","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","page","token","response","_args","arguments","wrap","_context","prev","next","undefined","value","localStorage","getItem","axios","params","headers","concat","sent","console","log","data","code","list","Math","ceil","Array","isArray","warn","t0","ElMessage","warning","finish","stop","apply","reduce","dateString","date","Date","getTime","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","err","statusMap","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","_callee2","orderId","_context2","message","duration","order_id","abrupt","success","_callee3","_context3","Authorization","imageUrl","image_url","product","image","images","getFullImageUrl","onMounted","__exports__","render"],"sourceRoot":""}