{"version":3,"file":"js/291.5fbafc6e.js","mappings":"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","sources":["webpack://ecodeco-user-client/./src/views/ProductDetail.vue","webpack://ecodeco-user-client/./src/views/ProductDetail.vue?f49c"],"sourcesContent":["<template>\n  <div class=\"product-detail\">\n    <div class=\"container\" v-if=\"product\">\n      <el-breadcrumb separator=\"/\">\n        <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n        <el-breadcrumb-item :to=\"{ path: '/products' }\">全部产品</el-breadcrumb-item>\n        <el-breadcrumb-item :to=\"{ path: `/products?category=${product.category}` }\">{{ product.category }}</el-breadcrumb-item>\n        <el-breadcrumb-item>{{ product.name }}</el-breadcrumb-item>\n      </el-breadcrumb>\n      \n      <div class=\"product-content\">\n        <!-- 产品图片 -->\n        <div class=\"product-image\">\n          <el-image :src=\"fullImageUrl\" :alt=\"product.name\" fit=\"cover\"></el-image>\n          <div class=\"product-badges\">\n            <span class=\"eco-badge\" v-if=\"product.eco_certification\">{{ product.eco_certification }}</span>\n            <span class=\"recyclable-badge\" v-if=\"product.is_recyclable\">可回收</span>\n            <span class=\"custom-badge\" v-if=\"product.is_custom\">可定制</span>\n          </div>\n        </div>\n        \n        <!-- 产品信息 -->\n        <div class=\"product-info\">\n          <h1 class=\"product-name\">{{ product.name }}</h1>\n          \n          <div class=\"product-meta\">\n            <div class=\"product-price\">¥{{ product.price.toFixed(2) }}</div>\n            <div class=\"product-stock\" :class=\"{ 'out-of-stock': product.stock <= 0 }\">\n              {{ product.stock > 0 ? `库存: ${product.stock}` : '库存不足' }}\n            </div>\n          </div>\n          \n          <!-- 产品信息 -->\n          <!-- <div class=\"eco-info\">\n            <h3>产品信息</h3>\n            <ul>\n              <li v-if=\"product.carbon_footprint\">\n                <EcoIcon iconName=\"carbon-footprint\" />\n                <span>碳足迹: {{ product.carbon_footprint }}</span>\n              </li>\n              <li v-if=\"product.eco_certification\">\n                <EcoIcon iconName=\"eco-certification\" />\n                <span>环保认证: {{ product.eco_certification }}</span>\n              </li>\n              <li v-if=\"product.is_recyclable\">\n                <EcoIcon iconName=\"recyclable\" />\n                <span>可回收材料</span>\n              </li>\n              <li v-if=\"product.is_custom\">\n                <EcoIcon iconName=\"custom-design\" />\n                <span>可定制设计</span>\n              </li>\n            </ul>\n          </div> -->\n          \n          <!-- 购买操作 -->\n          <div class=\"product-actions\">\n            <el-input-number v-model=\"quantity\" :min=\"1\" :max=\"product.stock\" :disabled=\"product.stock <= 0\"></el-input-number>\n            <el-button type=\"primary\" :disabled=\"product.stock <= 0\" @click=\"addToCart\">\n              <i class=\"el-icon-shopping-cart-2\"></i> 加入购物车\n            </el-button>\n            <el-button type=\"success\" :disabled=\"product.stock <= 0\" @click=\"buyNow\">\n              立即购买\n            </el-button>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 产品详情和评价 -->\n      <div class=\"product-tabs\">\n        <el-tabs v-model=\"activeTab\">\n          <el-tab-pane label=\"产品详情\" name=\"details\">\n            <div class=\"product-description\">\n              <h3>产品描述</h3>\n              <p>{{ product.description }}</p>\n              \n              <!-- 这里可以添加更多详细信息，如尺寸、材质等 -->\n              <h3>规格参数</h3>\n              <el-table :data=\"specifications\" stripe style=\"width: 100%\">\n                <el-table-column prop=\"name\" label=\"参数名\" width=\"180\"></el-table-column>\n                <el-table-column prop=\"value\" label=\"参数值\"></el-table-column>\n              </el-table>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n      \n      <!-- 相关产品推荐 -->\n      <div class=\"related-products\">\n        <h2 class=\"section-title\">相关产品推荐</h2>\n        <el-row :gutter=\"20\">\n          <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\" v-for=\"relatedProduct in relatedProducts\" :key=\"relatedProduct.id\">\n            <product-card :product=\"relatedProduct\"></product-card>\n          </el-col>\n        </el-row>\n      </div>\n    </div>\n    \n    <!-- 加载中 -->\n    <div class=\"loading-container\" v-else-if=\"loading\">\n      <el-skeleton :rows=\"10\" animated />\n    </div>\n    \n    <!-- 加载失败 -->\n    <el-result v-else icon=\"error\" title=\"加载失败\" sub-title=\"请稍后再试或返回首页\">\n      <template #extra>\n        <el-button type=\"primary\" @click=\"$router.push('/')\">返回首页</el-button>\n      </template>\n    </el-result>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { ElMessage } from 'element-plus'\nimport ProductCard from '@/components/ProductCard.vue'\nimport { getFullImageUrl } from '../utils/index'\nimport EcoIcon from '@/components/EcoIcons.vue'\n\nexport default {\n  name: 'ProductDetail',\n  components: {\n    ProductCard,\n    EcoIcon\n  },\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const store = useStore()\n    \n    const product = computed(() => store.getters['products/currentProduct'])\n    const loading = computed(() => store.getters['isLoading'])\n    const activeTab = ref('details')\n    const quantity = ref(1)\n    \n    // 模拟产品规格数据\n    const specifications = computed(() => {\n      const specList = []\n\n      if (product.value?.material) {\n        specList.push({ name: '蔬菜瓜果类型', value: product.value.material })\n      }\n\n      // 你可以根据实际字段继续追加更多动态参数：\n      if (\n        product.value?.eco_labels !== undefined &&\n        product.value?.eco_labels !== null &&\n        product.value.eco_labels.length > 0\n      ) {\n        const labelStr = Array.isArray(product.value.eco_labels)\n          ? product.value.eco_labels.join('，')\n          : product.value.eco_labels;\n        specList.push({ name: '营养标签', value: labelStr });\n      }\n      \n      if (product.value?.carbon_footprint !== undefined && product.value?.carbon_footprint !== null) {\n        specList.push({ name: '每件总量', value: `${product.value.carbon_footprint} Kg` })\n      }\n\n      specList.push({ name: '产地', value: '中国大陆' })\n\n      return specList\n    })\n\n    \n    // 模拟相关产品\n    const relatedProducts = ref([])\n    \n    onMounted(async () => {\n      try {\n        // 获取产品ID，直接使用路由参数，不进行parseInt转换\n        const productId = route.params.id\n        \n        console.log('产品详情页-路由参数:', route.params)\n        \n        // 添加防御性检查\n        if (!productId) {\n          console.error('产品ID为空，无法获取产品详情')\n          ElMessage.error('无效的产品ID')\n          router.push('/products')\n          return\n        }\n        \n        const result = await store.dispatch('products/fetchProduct', productId)\n        \n        // 检查产品是否获取成功\n        if (!product.value) {\n          console.error('产品获取失败，返回产品列表页')\n          ElMessage.error('无法获取产品详情')\n          router.push('/products')\n          return\n        }\n        \n        console.log('产品详情页-获取到产品:', product.value)\n        \n        // 获取相同类别的产品作为相关产品\n        const products = store.getters['products/allProducts']\n        if (product.value && products && products.length > 0) {\n          // 使用product_id识别产品\n          const currentProductId = product.value.product_id || product.value.id\n          relatedProducts.value = products\n            .filter(p => p.category === product.value.category && (p.product_id || p.id) !== currentProductId)\n            .slice(0, 4)\n          \n          // 如果没有足够的相关产品，随机补充\n          if (relatedProducts.value.length < 4) {\n            const additionalProducts = products\n              .filter(p => (p.product_id || p.id) !== currentProductId && !relatedProducts.value.includes(p))\n              .slice(0, 4 - relatedProducts.value.length)\n            \n            relatedProducts.value = [...relatedProducts.value, ...additionalProducts]\n          }\n        } else {\n          console.log('没有找到足够的产品数据来推荐相关产品')\n        }\n      } catch (error) {\n        console.error('获取产品详情失败:', error)\n        ElMessage.error('获取产品详情失败')\n      }\n    })\n    \n    // 添加到购物车\n    const addToCart = () => {\n      if (product.value.stock <= 0) {\n        ElMessage.warning('该产品已售罄')\n        return\n      }\n      \n      store.dispatch('cart/addToCart', {\n        product: product.value,\n        quantity: quantity.value\n      })\n      \n      ElMessage.success('成功添加到购物车')\n    }\n    \n    // 立即购买\n    const buyNow = () => {\n      addToCart()\n      router.push('/cart')\n    }\n    \n    // 处理图片URL\n    const fullImageUrl = computed(() => {\n      if (product.value) {\n        console.log('处理产品图片，产品数据:', product.value)\n        \n        // 依次检查所有可能的图片字段\n        if (product.value.image) {\n          return product.value.image\n        } else if (product.value.image_url) {\n          return getFullImageUrl(product.value.image_url)\n        } else if (product.value.images && product.value.images.length > 0) {\n          return product.value.images[0]\n        }\n        \n        // 如果没有图片，返回默认图片\n        console.warn('产品没有图片')\n        return require('@/assets/default-product.png')\n      }\n      return require('@/assets/default-product.png')\n    })\n    \n    return {\n      product,\n      loading,\n      activeTab,\n      quantity,\n      specifications,\n      relatedProducts,\n      addToCart,\n      buyNow,\n      fullImageUrl\n    }\n  }\n}\n</script>\n\n<style scoped>\n.product-detail {\n  padding: 20px 0 40px;\n}\n\n.el-breadcrumb {\n  margin-bottom: 20px;\n}\n\n.product-content {\n  display: flex;\n  flex-wrap: wrap;\n  margin-bottom: 30px;\n}\n\n.product-image {\n  width: 100%;\n  max-width: 500px;\n  margin-right: 30px;\n  margin-bottom: 20px;\n  position: relative;\n}\n\n.product-badges {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  display: flex;\n  flex-direction: column;\n}\n\n.product-badges span {\n  margin-bottom: 5px;\n  padding: 2px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  color: white;\n}\n\n.eco-badge {\n  background-color: #4fd58e;\n}\n\n.recyclable-badge {\n  background-color: #909399;\n}\n\n.custom-badge {\n  background-color: #409EFF;\n}\n\n.product-info {\n  flex: 1;\n  min-width: 300px;\n}\n\n.product-name {\n  font-size: 24px;\n  color: #303133;\n  margin-bottom: 15px;\n}\n\n.product-meta {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.product-price {\n  font-size: 28px;\n  color: #F56C6C;\n  font-weight: bold;\n  margin-right: 20px;\n}\n\n.product-stock {\n  font-size: 14px;\n  color: #4fd58e;\n}\n\n.out-of-stock {\n  color: #F56C6C;\n}\n\n.eco-info {\n  background-color: #f9f9f9;\n  padding: 15px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n}\n\n.eco-info h3 {\n  font-size: 16px;\n  margin-bottom: 10px;\n  color: #303133;\n}\n\n.eco-info ul {\n  list-style: none;\n  padding: 0;\n}\n\n.eco-info ul li {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n  color: #606266;\n}\n\n.eco-info ul li i {\n  color: #4fd58e;\n  margin-right: 8px;\n}\n\n.product-actions {\n  display: flex;\n  align-items: center;\n  margin-top: 20px;\n}\n\n.product-actions .el-input-number {\n  width: 120px;\n  margin-right: 15px;\n}\n\n.product-actions button {\n  margin-right: 10px;\n}\n\n.product-tabs {\n  margin-bottom: 40px;\n}\n\n.product-description h3 {\n  font-size: 18px;\n  color: #303133;\n  margin: 20px 0 10px;\n}\n\n.loading-container {\n  padding: 20px;\n}\n\n.section-title {\n  margin-bottom: 20px;\n}\n\n/* 响应式样式 */\n@media (max-width: 768px) {\n  .product-content {\n    flex-direction: column;\n  }\n  \n  .product-image {\n    max-width: 100%;\n    margin-right: 0;\n  }\n  \n  .product-name {\n    font-size: 20px;\n  }\n  \n  .product-price {\n    font-size: 24px;\n  }\n  \n  .product-actions {\n    flex-wrap: wrap;\n  }\n  \n  .product-actions .el-input-number {\n    margin-bottom: 10px;\n  }\n  \n  .product-actions button {\n    margin-bottom: 10px;\n  }\n}\n\n/* 小屏幕手机适配 */\n@media (max-width: 480px) {\n  .product-name {\n    font-size: 18px;\n  }\n  \n  .product-price {\n    font-size: 20px;\n  }\n  \n  .eco-info {\n    padding: 10px;\n  }\n  \n  .product-actions {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .product-actions .el-input-number {\n    width: 100%;\n    margin-right: 0;\n    margin-bottom: 10px;\n  }\n  \n  .product-actions button {\n    width: 100%;\n    margin-right: 0;\n  }\n}\n</style> ","import { render } from \"./ProductDetail.vue?vue&type=template&id=2bab2a6a&scoped=true\"\nimport script from \"./ProductDetail.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetail.vue?vue&type=script&lang=js\"\n\nimport \"./ProductDetail.vue?vue&type=style&index=0&id=2bab2a6a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2bab2a6a\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","$setup","product","_hoisted_2","_createVNode","_component_el_breadcrumb","separator","_component_el_breadcrumb_item","to","path","concat","category","name","_hoisted_3","_hoisted_4","_component_el_image","src","fullImageUrl","alt","fit","_hoisted_5","eco_certification","_hoisted_6","_toDisplayString","is_recyclable","_hoisted_7","is_custom","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","price","toFixed","_normalizeClass","stock","_hoisted_13","_component_el_input_number","quantity","$event","min","max","disabled","_component_el_button","type","onClick","addToCart","_hoisted_14","buyNow","_hoisted_15","_component_el_tabs","activeTab","_component_el_tab_pane","label","_hoisted_16","_hoisted_17","description","_hoisted_18","_component_el_table","data","specifications","stripe","style","_component_el_table_column","prop","width","_hoisted_19","_hoisted_20","_component_el_row","gutter","_Fragment","_renderList","relatedProducts","relatedProduct","_createBlock","_component_el_col","xs","sm","md","lg","key","id","_component_product_card","loading","_hoisted_21","_component_el_skeleton","rows","animated","_component_el_result","icon","title","extra","_withCtx","_cache","_ctx","$router","push","components","ProductCard","EcoIcon","setup","route","useRoute","router","useRouter","store","useStore","computed","getters","ref","_product$value","_product$value2","_product$value3","_product$value4","_product$value5","specList","value","material","undefined","eco_labels","length","labelStr","Array","isArray","join","carbon_footprint","onMounted","_asyncToGenerator","_regeneratorRuntime","mark","_callee","productId","products","currentProductId","additionalProducts","wrap","_context","prev","next","params","console","log","error","ElMessage","abrupt","dispatch","sent","product_id","filter","p","slice","includes","_toConsumableArray","t0","stop","warning","success","image","image_url","getFullImageUrl","images","warn","require","__exports__","render"],"sourceRoot":""}